# 섹션 4. HTTP 메서드

### 강의항목

* HTTP API를 만들어보자
* HTTP 메서드 - GET, POST
* HTTP 메서드 - PUT, PATCH, DELETE
* HTTP 메서드의 속성

### 학습내용

* HTTP API를 만들어보자
  * URI\(Uniform Resource Identifier\)
    * 회원 목록 조회 /read-member-list
    * 회원 조회 /read-member-by-id
    * 회원 등록 /create-member
    * 회원 수정 /update-member
    * 회원 삭제 /delete-member
  * 가장 중요한 것은 **리소스 식별**
    * 리소스의 의미
      * 회원이라는 개념 자체가 리소스
    * 어떻게 식별?
      * 등록, 수정, 조회 등은 모두 배제
      * 회원에 집중하고 식별 --&gt; 회원 리소스를 URI에 매핑
  * API URI 설계
    * URI 계층 구조 활용
    * 회원 목록 조회 /members
    * 회원 조회 /members/{id}
    * 회원 등록 /members/{id}
    * 회원 수정 /members/{id}
    * 회원 삭제 /members/{id}
    * 참고: 계층 구조상 상위를 컬렉션으로 보고 복수단어 사용 권장\(member -&gt; members\)
    * 각각 어떻게 구분하지?
  * URI는 리소스만 식별
    * 행위가 들어가서는 안된다
    * 행위는 어떻게 구분?
      * HTTP 메서드
* HTTP 메서드 - 주요 메서드
  * GET : 리소스 조회
  * POST : 요청 데이터 처리, 주로 등록에 사용
  * PUT : 리소스를 대체, 해당 리소스가 없으면 생성
  * PATCH : 리소스 부분 변경
  * DELETE : 리소스 삭제
* HTTP 메서드 - 기타 메서드
  * HEAD : GET과 동일하지만 메시지 부분을 제외하고 상태줄과 헤더만 반환
  * OPTIONS, CONNECT, TRACE
* HTTP 메서드 - GET
  * 리소스 조회
  * 서버에 전달하고 싶은 데이터는
    * query\(쿼리 파라미터, 쿼리 스트링\)를 통해서 전달
  * 메시지 바디를 사용해서 데이터를 전달할 수 있지만
    * 지원하지 않는 곳이 많아서 권장 X
  * 메시지 전달 --&gt; 서버 도착 --&gt; 응답 데이터
* HTTP 메서드 - POST
  * 요청 데이터 처리
  * 메시지 바디를 통해 서버로 요청 데이터를 전달
  * 서버는 요청 데이터를 **처리**
    * 메시지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행
  * 주로 전달된 데이터로
    * 신규 리소스 등록, 프로세스 처리에 사용
  * 메시지 전달 --&gt; 신규 리소스 생성\(신규 리소스 식별자 생성\) --&gt; 응답 데이터
  * POST는 요청 데이터를 어떻게 처리한다는 뜻?
    * 대상 리소스가 리소스의 고유한 의미 체계에 따라
    * 요청에 포함된 표현을 처리하도록 요청...?? \(구글번역 ㅋ\)
  * 사용 예시
    * HTML 양식에 입력된 필드와 같은 데이터 블록을 데이터 처리 프로세스에 제
      * HTML 폼에 입력한 정보로 회원가입, 주문 등
    * 게시판, 뉴스 그룹, 메일링 리스트 또는 유사한 기사 그룹에 메시지 게시
      * 게시판 글쓰기, 댓글쓰기
    * 서버가 아직 식별하지 않은 새 리소스 생성
      * 신규 주문, 신규 회원 생성
    * 기존 자원에 데이터 추가
      * 한 문서 끝에 내용 추가
  * 이 리소스 URI에 POST 요청이 오면
    * 요청 데이터를 어덯게 처리할지 리소스마다 따로 정해야 함 \(정해진 것이 없음\)
  * 정리
    * 새 리소스 생성 혹은 등록
      * 서버가 아직 식별하지 않은 새 리소스 생성
    * 요청 데이터 처리
      * 단순히 데이터를 생성하거나 변경하는 것을 넘어서
      * 프로세스를 처리해야 하는 경우 \(상태 변경과 같은\)
      * POST의 결과로 새로운 리소스가 생성되지 않을 수 있음
      * 컨트롤 URI : 동작을 명령하는 경우 \(예. order/start-delivery\)
    * 다른 메서드로 처리하기 애매한 경우
      * 예\) JSON으로 조회 데이터를 넘겨야 하는데 GET 메서드를 사용하기 어려운 경우
      * 애매하면 POST
* HTTP 메서드 - PUT
  * 리소스를 \(완전히\) 대체
  * 있으면 대체. 없으면 생성
  * 즉, 덮어버림
  * **클라이언트가 리소스를 식별**
    * 클라이언트가 리소스 위치를 알고 URI 지정
      * 예. /members/101
    * POST와의 차이점
      * 정확한 위치를 모름
      * 예. /members/
  * 전체를 삭제하고 그 위에 쓴다
    * 부분 변경 불가
    * 즉, 수정 불가능
* HTTP 메서드 - PATCH
  * 부분 변경 가 \(리소스 부분 변경\)
* HTTP 메서드 - DELETE
  * 리소스 제거
* HTTP 메서드의 속성
  * 안전, 멱등, 캐시가능
  * 안전 Safe
    * 호출해도 변경하지 않는다 \(GET\)
    * 로그가 쌓여서 장애가 발생하는 경우는 고려하지 않
    * 오직 해당 리소스만 고려
  * 멱등 Idempotent
    * 몇번을 호출해도 결과는 같다 \(GET, PUT, DELETE\)
    * PUT은 기존을 삭제하고 입력하기 때문
    * 활용
      * 자동 복구 메커니즘
      * Timeout 후 클라이언트의 같은 요
    * 외부 요인으로 중간에 리소스가 변경되는 것까지 고려 X
    * 예\) GET -&gt; PUT -&gt; GET
  * 캐시가능 Casheable
    * 응답 결과 리소스를 캐시해서 사용해도 되는가?
    * 이미지를 큰 것을 불러올 때
    * 실제로는 GET, HEAD만 사용
    * POST는 본문 내용까지 캐시 키\(Key\)로 고려해서 구현하기 쉽지 않음

